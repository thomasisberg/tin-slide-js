{"version":3,"sources":["../src/js/tin-slide.js"],"names":["global","factory","exports","module","define","amd","TinSlide","window","TinSlide$","container","options","tinSlide","logic","defaultSettings","debug","effects","slideHorizontal","on","offset","numVisible","centerSelected","scale","min","max","minAt","maxAt","fade","motionBlur","maxPixels","stepMin","factor","useUpdateContainerHeight","verticallyCenter","useContainerClickNextPrev","swipe","touchOnly","stepFactor","stepFactorTouch","pressMoveBeforeInvokeGrabbing","releaseRequiredSwipeX","generate","dots","afterContainer","markup","dot","nav","prev","next","styles","containerParentPosition","ratio","hasHeight","autoPlay","time","pauseOnHover","stopOnNavigation","loop","useNonLoopingHint","cropContainer","zIndex","hideItems","hideUsingVisibility","moveSelectedItem","stepSnap","stepMax","stepTurnBreakFactor","chokeReleaseStep","chokeReleaseFactor","chokeReturnFactor","settings","containerWidth","items","numItems","numHalfItems","pointer","pointerVal","selectedItem","numItemsInside","itemsVisible","itemsOutside","targetVal","targetIndex","targetIndexWithinBounds","timerAnimate","step","stepAbs","choke","containerHeight","timerUpdateContainerHeight","swipePressX","timerSwipePress","swipePressPointerVal","swipeTargetVal","timerSwipe","swipeX","swipeXAbs","swipePreventDefault","swipeIsTouch","swipeScrollsElementCounter","dotsItems","currentDotIndex","ratioPercent","timerAutoPlay","autoPlayState","autoPlayForwards","timerNonLoopingHint","translateXOffsetProgress","style","breakPoints","currentBreakPoint","init","onSwipePressMove","bind","clearSwipePressMove","item","i","n","v","element","src","body","document","getElementsByTagName","tinSlideImages","getElementsByClassName","tinSlideImagesArr","length","push","shift","img","createElement","getAttribute","undefined","setAttribute","srcset","bg","parentNode","replaceChild","tinSlideBackgrounds","tinSlideBackgroundsArr","tinSlideMarkup","tinSlideMarkupArr","template","innerHTML","firstElementChild","childNodes","nodeType","Node","ELEMENT_NODE","tinSlideIndex","position","hideOrShowElement","images","querySelectorAll","head","querySelector","link","rel","as","href","appendChild","_onAnimationTimer","onAnimationTimer","_onSwipePress","onSwipePress","_onSwipeRelease","onSwipeRelease","_onSwipeMove","onSwipeMove","_onTimerSwipe","onTimerSwipe","_pauseAuto","pauseAuto","_resumeAuto","resumeAuto","_imageLoaded","imageLoaded","_updateContainerHeight","updateContainerHeight","setOptions","width","parseInt","isNaN","sort","a","b","breakPointOptions","mergeObjects","cloneObject","updateBreakPoint","removeAttribute","addEventListener","event","preventDefault","passive","breakPoint","getBreakPoint","initSettings","w","getContainerWidth","top","left","overflow","paddingTop","layerX","offsetLeft","previous","setSwipeStyles","removeEventListener","height","createDots","insertBefore","nextSibling","removeChild","createNav","createStyles","firstChild","pauseElements","startAuto","setPointer","updateDots","j","imageStyles","css","removeCss","imageNodes","cssText","Array","isArray","addClass","className","classes","split","indexOf","join","removeClass","idx","splice","hasClass","hide","visibility","display","scope","type","original","clone","add","that","DOMParser","parseFromString","liClickHandler","onDotClick","cursor","val","index","visibleItems","visiblePointer","floorPointer","Math","floor","ceilPointer","len","relativeItem","progress","emit","applySlideEffect","isAuto","status","stopAuto","animateToTarget","setTimeout","isTouch","target","nodeName","nativeEvent","button","which","touches","clientX","onTimerSwipePress","stopPropagation","clearTimeout","cancelAnimationFrame","stepAdd","startSwipeTimer","tinSlideMoved","t","scrollWidth","offsetWidth","scrollLeft","currentX","round","limit","ceil","requestAnimationFrame","diff","animateTo","diffAbs","goTo","fromSubSlideWithHeight","parentSlides","getParentSlides","subSlides","getSubSlides","updateContainerHeightFromParent","doUpdateContainerHeight","reverse","minHeight","id","offsetHeight","slides","checkParentNode","checkChildNodes","getCurrentItem","progressAbs","transforms","translateXProgress","translateX","translateY","scaleFactor","transform","opacity","opacityFactor","applyBlur","blurFactor","blur","cssBlur","filter","clearInterval","setInterval","clientHeight","events","getDots","getNav","eventType","listener","removeListener","listeners","args","slice","call","arguments","apply","ondragstart","documentHiddenName","onVisibilityChange","h","eventMap","focus","focusin","pageshow","focusout","pagehide","isHidden","onfocusin","onfocusout","onpageshow","onpagehide","onfocus","onblur","constructor","prototype","Object","defineProperty","get","nodes","node","Element","requestAnimFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback"],"mappings":"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","sourcesContent":["/*!\n * TinSlide v0.1.24\n * (c) 2018 Thomas Isberg\n * Released under the MIT License.\n */\n(function (global, factory) {\n    'use strict';\n\tif(typeof exports === 'object' && typeof module !== 'undefined') {\n        module.exports = factory();\n    }\n    else if(typeof define === 'function' && define.amd) {\n        define(factory);\n    }\n    else {\n        global.TinSlide = factory();\n    }\n}(this ? this : window, function () {\n    'use strict';\n\n    function TinSlide$(container, options) {\n\n        var tinSlide, logic;\n\n        logic = {\n\n            /*--------------------------------------------------\n            | Settings possible to override using options.\n            |-------------------------------------------------*/\n            defaultSettings: {\n                debug: false,\n                // Desired slide effects.\n                effects: {\n                    slideHorizontal: {\n                        on: true,\n                        offset: 1, // 0 - x\n                        numVisible: 1,\n                        centerSelected: false\n                    },\n                    scale: {\n                        on: false,\n                        min: 0.8,   // 0 - x\n                        max: 1,     // 0 - x\n                        minAt: 1.0, // 0 - 1\n                        maxAt: 0.0  // 0 - 1\n                    },\n                    fade: {\n                        on: false,\n                        min: 0,     // 0 - 1\n                        max: 1,     // 0 - 1\n                        minAt: 1.0, // 0 - 1\n                        maxAt: 0    // 0 - 1\n                    },\n                    motionBlur: {\n                        on: false,\n                        maxPixels: 2,\n                        stepMin: 0.05,\n                        factor: 500\n                    }\n                },\n                // If container height should actively match item height.\n                useUpdateContainerHeight: false,\n                // Vertically center slides.\n                verticallyCenter: false,\n                // Optional next / prev navigation on container click.\n                useContainerClickNextPrev: false,\n                // Swipe navigation.\n                swipe: {\n                    on: true,\n                    // Disable swipe using mouse.\n                    touchOnly: false,\n                    // Step factor every step when swiping. Applied on step to target.\n                    stepFactor: 0.25,\n                    // Same as above, but for touch swipe. Generally nicer with a faster response.\n                    stepFactorTouch: 0.75,\n                    // Optionally wait for move before invoke grabbing.\n                    // Useful if the entire container is clickable.\n                    // Especially if clicking either half navigates to previous / next.\n                    pressMoveBeforeInvokeGrabbing: false,\n                    releaseRequiredSwipeX: 0,\n                },\n                // Optionally generate markup.\n                generate: {\n                    dots: {\n                        on: true,\n                        afterContainer: true,\n                        markup: {\n                            container: null,\n                            dot: null\n                        }\n                    },\n                    nav: {\n                        on: true,\n                        afterContainer: true,\n                        markup: {\n                            container: null,\n                            prev: null,\n                            next: null\n                        }\n                    },\n                    styles: {\n                        on: true,\n                        containerParentPosition: \"relative\"\n                    }\n                },\n                // Optional ratio.\n                ratio: null,\n                // If slider has height (separate CSS) we can absolute position all slides.\n                hasHeight: false,\n                // Auto play.\n                autoPlay: {\n                    on: false,\n                    time: 5000,\n                    pauseOnHover: true,\n                    stopOnNavigation: true\n                },\n                // Loop\n                loop: true,\n                // Non looping next / prev animation when end reached.\n                useNonLoopingHint: true,\n                // Option to crop container (or not).\n                cropContainer: true,\n                // Base z-index. Slider will get base z, active slide +1.\n                // Overlying navigation can be set to higher in separate CSS.\n                // Disable zIndex by setting zIndex to 0.\n                zIndex: 0,\n                hideItems: true,\n                // Hide using visibility:hidden instead of display:none.\n                // Useful if images aren't loaded as desired.\n                hideUsingVisibility: false,\n                // Removes selected item from dom, and appends it to the parent as last child.\n                moveSelectedItem: false,\n                // Minimal amount of step required to reach target.\n                stepSnap: 0.0003,\n                // Step factor every step. Applied on step to target.\n                stepFactor: 0.2,\n                // Max step every step.\n                stepMax: 0.20,\n                // Minimum step.\n                stepMin: 0.0004,\n                // 0 - 1\n                // 0 = No break (will never turn).\n                // 1 = Instant break  turns immediately.\n                stepTurnBreakFactor: 0.5,\n                // Choke is increased by this value every step.\n                chokeReleaseStep: 0.05,\n                // Choke is multiplied by this value every step.\n                chokeReleaseFactor: 1.5,\n                // 0 - X\n                // 0 = Slow break towards target. Higher values breaks harder.\n                // Brings back choke when target is approached.\n                // Distance to target multiplied by this value = choke.\n                // This is what makes the slider break in on target.\n                chokeReturnFactor: 2\n                // // Break points allows for completely different settings\n                // // at desired sliders widths (break points). Pass object\n                // // with break point as key and settings aso bject as value,\n                // // for example {400: {}}\n                // breakPoints: null,\n            },\n            // Settings for current break point.\n            settings: {},\n\n            /*--------------------------------------------------\n            | Local working variables.\n            |-------------------------------------------------*/\n            container: null,\n            containerWidth: 0,\n            items: [],\n            numItems: 0,\n            numHalfItems: 0,\n            pointer: 0,\n            pointerVal: 0,\n            selectedItem: null,\n            numItemsInside: 1,\n            itemsVisible: {},\n            itemsOutside: {},\n            targetVal: 0,\n            targetIndex: 0,\n            targetIndexWithinBounds: 0,\n            timerAnimate: 0,\n            // Last step.\n            step: 0,\n            // Last step absolute value.\n            stepAbs: 0,\n            // Chokes acceleration.\n            // Is always between 0 and 1.\n            // Is increased on every step upon acceleration (up to 1).\n            // Applied max step every step is stepMax * choke.\n            choke: 0,\n            containerHeight: 0,\n            timerUpdateContainerHeight: 0,\n            swipePressX: 0,\n            timerSwipePress: 0,\n            swipePressPointerVal: 0,\n            swipeTargetVal: 0,\n            timerSwipe: 0,\n            swipeX: 0,\n            swipeXAbs: 0,\n            swipePreventDefault: false,\n            swipeIsTouch: false,\n            swipeScrollsElementCounter: 0,\n            // Dots.\n            dotsItems: null,\n            currentDotIndex: null,\n            // Next / prev.\n            nav: null,\n            ratioPercent: null,\n            timerAutoPlay: 0,\n            autoPlayState: null,\n            autoPlayForwards: true,\n            timerNonLoopingHint: 0,\n            translateXOffsetProgress: 0,\n            // Generated styles element.\n            style: null,\n            breakPoints: [],\n            currentBreakPoint: {},\n\n            /**\n             *  Methods.\n             */\n            init: function(container, options) {\n\n                this.onSwipePressMove = this.onSwipePressMove.bind(this);\n                this.clearSwipePressMove = this.clearSwipePressMove.bind(this);\n\n                this.container = container;\n                var item, i, n, v, element, src;\n                this.body = document.getElementsByTagName('body')[0];\n\n                /*--------------------------------------------------\n                | Replace all .tin-slide-image elements.\n                |-------------------------------------------------*/\n                var tinSlideImages = container.getElementsByClassName('tin-slide-img');\n                var tinSlideImagesArr = [];\n                for(i=0, n=tinSlideImages.length; i<n; i++) {\n                    tinSlideImagesArr.push(tinSlideImages[i]);\n                }\n                while(tinSlideImagesArr.length) {\n                    element = tinSlideImagesArr.shift();\n                    var img = document.createElement('img');\n                    src = element.getAttribute('data-src');\n                    if(src && src !== undefined && src !== '') {\n                        img.setAttribute('src', src);\n                    }\n                    var srcset = element.getAttribute('data-srcset');\n                    if(srcset && srcset !== undefined && srcset !== '') {\n                        img.setAttribute('srcset', srcset);\n                    }\n                    var bg = element.getAttribute('data-bg');\n                    if(bg && bg !== undefined && bg !== '') {\n                        img.setAttribute('style', 'background: url(\"'+bg+'\") no-repeat center; background-size: cover;');\n                    }\n                    element.parentNode.replaceChild(img, element);\n                }\n\n                /*--------------------------------------------------\n                | Add background image to all\n                | .tin-slide-background elements.\n                |-------------------------------------------------*/\n                var tinSlideBackgrounds = container.getElementsByClassName('tin-slide-bg');\n                var tinSlideBackgroundsArr = [];\n                for(i=0, n=tinSlideBackgrounds.length; i<n; i++) {\n                    tinSlideBackgroundsArr.push(tinSlideBackgrounds[i]);\n                }\n                while(tinSlideBackgroundsArr.length) {\n                    element = tinSlideBackgroundsArr.shift();\n                    src = element.getAttribute('data-bg');\n                    if(src && src !== undefined && src !== '') {\n                        element.setAttribute('style', 'background: url(\"'+src+'\") no-repeat center; background-size: cover;');\n                    }\n                }\n\n                /*--------------------------------------------------\n                | Replace all .tin-slide-markup elements.\n                |-------------------------------------------------*/\n                var tinSlideMarkup = container.getElementsByClassName('tin-slide-markup');\n                var tinSlideMarkupArr = [];\n                for(i=0, n=tinSlideMarkup.length; i<n; i++) {\n                    tinSlideMarkupArr.push(tinSlideMarkup[i]);\n                }\n                while(tinSlideMarkupArr.length) {\n                    element = tinSlideMarkupArr.shift();\n                    var template = document.createElement('div');\n                    template.innerHTML = element.getAttribute('data-markup');\n                    element.parentNode.replaceChild(template.firstElementChild, element);\n                }\n\n                /*--------------------------------------------------\n                | Traverse children and create slider items.\n                |-------------------------------------------------*/\n                var items = [];\n                for(i=0, n=this.container.childNodes.length; i<n; i++) {\n                    item = this.container.childNodes[i];\n                    if(item.nodeType === Node.ELEMENT_NODE) {\n                        items.push(item);\n                    }\n                }\n                this.items = items;\n                this.numItems = this.items.length;\n                this.numHalfItems = this.numItems / 2;\n\n                for(i=0; i<this.numItems; i++) {\n                    item = this.items[i];\n                    item.tinSlideIndex = i;\n                    // Hide all items\n                    item.style.position = 'absolute';\n                    this.hideOrShowElement(item, true, options);\n                }\n\n                /*--------------------------------------------------\n                | Preload images.\n                |-------------------------------------------------*/\n                var images = this.container.querySelectorAll('img');\n                if (images.length) {\n                    var head = document.querySelector('head');\n                    for (var i=0; i<images.length; i++) {\n                        var img = images[i];\n                        var src = img.getAttribute('src');\n                        if (src) {\n                            var link = document.createElement('link');\n                            link.rel = 'preload';\n                            link.as = 'image';\n                            link.href = src;\n                            head.appendChild(link);\n                        }\n                    }\n                }\n\n                /*--------------------------------------------------\n                | Create functions bound to this scope.\n                |-------------------------------------------------*/\n                this._onAnimationTimer = this.onAnimationTimer.bind(this);\n                this._onSwipePress = this.onSwipePress.bind(this);\n                this._onSwipeRelease = this.onSwipeRelease.bind(this);\n                this._onSwipeMove = this.onSwipeMove.bind(this);\n                this._onTimerSwipe = this.onTimerSwipe.bind(this);\n                this._pauseAuto = this.pauseAuto.bind(this);\n                this._resumeAuto = this.resumeAuto.bind(this);\n                this._imageLoaded = this.imageLoaded.bind(this);\n                this._updateContainerHeight = this.updateContainerHeight.bind(this);\n\n                /*--------------------------------------------------\n                | Store default settings with standard options.\n                |-------------------------------------------------*/\n                if(options !== undefined) {\n                    this.setOptions(this.defaultSettings, options);\n\n                    /*--------------------------------------------------\n                    | Create sorted array with break points.\n                    |-------------------------------------------------*/\n                    if(options.breakPoints !== undefined) {\n                        for(v in options.breakPoints) {\n                            var width = parseInt(v, 10);\n                            if(!isNaN(width)) {\n                                this.breakPoints.push({\n                                    width: width,\n                                    options: options.breakPoints[v]\n                                });\n                            }\n                        }\n                        this.breakPoints.sort(function(a, b) {\n                            return a.width-b.width;\n                        });\n                        // Create merged options objects.\n                        var breakPointOptions = {};\n                        for(i=0; i<this.breakPoints.length; i++) {\n                            this.mergeObjects(breakPointOptions, this.breakPoints[i].options);\n                            this.breakPoints[i].options = this.cloneObject(breakPointOptions, {});\n                        }\n                    }\n                }\n\n                container.style.position = 'relative';\n\n                /*--------------------------------------------------\n                | Settings for current break point\n                | (or none / default).\n                |-------------------------------------------------*/\n                this.updateBreakPoint();\n\n                // for(i=0; i<this.numItems; i++) {\n                //     this.hideOrShowElement(item, true);\n                // }\n\n                for(i=0; i<this.numItems; i++) {\n                    item = this.items[i];\n                    item.removeAttribute('tin-slide-cloak');\n                }\n                container.removeAttribute('tin-slide-cloak');\n\n                /**\n                 * Listen for images loaded.\n                 */\n                var images = this.container.querySelectorAll('img');\n                for(i=0; i<images.length; i++) {\n                    images[i].addEventListener('load', this._imageLoaded);\n                }\n\n                // Force recalculation of container width on window resize.\n                // Calculation will occur when width is needed.\n                window.addEventListener('resize', function() {\n                    this.containerWidth = 0;\n                    this.updateBreakPoint();\n                }.bind(this));\n\n\n                document.addEventListener('touchmove', function(event) {\n                    if(this.swipePreventDefault) {\n                        event.preventDefault();\n                    }\n                }.bind(this), {\n                    passive: false\n                });\n            },\n            /*--------------------------------------------------\n            | Set break point.\n            |-------------------------------------------------*/\n            updateBreakPoint: function() {\n                var breakPoint = this.getBreakPoint();\n                if(breakPoint === this.currentBreakPoint) {\n                    return;\n                }\n                this.currentBreakPoint = breakPoint;\n                if(breakPoint) {\n                    this.container.setAttribute('tin-slide-break-point', breakPoint.width);\n                    this.initSettings(breakPoint.options);\n                }\n                else {\n                    this.container.removeAttribute('tin-slide-break-point');\n                    this.initSettings();\n                }\n            },\n            /*--------------------------------------------------\n            | Get break point options.\n            |-------------------------------------------------*/\n            getBreakPoint: function() {\n                var breakPoint = null;\n                var i, n, w = this.getContainerWidth();\n                for(i=0, n=this.breakPoints.length; i<n; i++) {\n                    if(w >= this.breakPoints[i].width) {\n                        breakPoint = this.breakPoints[i];\n                    }\n                    else {\n                        break;\n                    }\n                }\n                return breakPoint;\n            },\n            /*--------------------------------------------------\n            | Initialize settings for break point (or default).\n            |-------------------------------------------------*/\n            initSettings: function(breakPointOptions) {\n                if(breakPointOptions === undefined) {\n                    this.settings = this.defaultSettings;\n                }\n                else {\n                    var settings = this.cloneObject(this.defaultSettings, {});\n                    this.setOptions(settings, breakPointOptions);\n                    this.settings = settings;\n                }\n\n                var i, n, item;\n\n                for(i=0; i<this.numItems; i++) {\n                    item = this.items[i];\n\n                    // Item styles\n                    item.style.top = !this.settings.verticallyCenter ? '0' : '50%';\n                    item.style.left = '0';\n                    item.style.width = (this.settings.effects.slideHorizontal.on ? (100/this.settings.effects.slideHorizontal.numVisible) : 100)+'%';\n                }\n\n                /**\n                 *  Container styles.\n                 */\n                if(this.settings.cropContainer) {\n                    this.container.style.overflow = 'hidden';\n                }\n                else if(this.container.style.overflow === 'hidden') {\n                    this.container.style.overflow = '';\n                }\n                if(this.settings.ratio) {\n                    this.settings.ratioPercent = 100 * (1/this.settings.ratio);\n                    this.container.style.paddingTop = this.settings.ratioPercent+'%';\n                }\n                else if(this.container.style.paddingTop !== '') {\n                    this.container.style.paddingTop = '';\n                }\n                if(this.settings.zIndex) {\n                    this.container.style.zIndex = this.settings.zIndex;\n                }\n                else if(this.container.style.zIndex !== '') {\n                    this.container.style.zIndex = '';\n                }\n\n                /*--------------------------------------------------\n                | Set container click navigation.\n                |-------------------------------------------------*/\n                if(this.settings.useContainerClickNextPrev) {\n                    this.container.addEventListener('mouseup', function(event) {\n                        var containerWidth = this.getContainerWidth();\n                        if(containerWidth) {\n                            if((event.layerX - this.container.offsetLeft) < containerWidth / 2) {\n                                this.previous();\n                            }\n                            else {\n                                this.next();\n                            }\n                        }\n                    }.bind(this));\n                }\n\n                /*--------------------------------------------------\n                | Set up swipe navigation.\n                |-------------------------------------------------*/\n                if(this.items.length > 1) {\n                    this.setSwipeStyles();\n\n                    this.container.removeEventListener('touchstart', this._onSwipePress);\n                    this.container.removeEventListener('mousedown', this._onSwipePress);\n                    if(this.settings.swipe.on) {\n                        this.container.addEventListener('touchstart', this._onSwipePress);\n                        if(!this.settings.swipe.touchOnly) {\n                            this.container.addEventListener('mousedown', this._onSwipePress);\n                        }\n                    }\n                }\n\n                /*--------------------------------------------------\n                | If container height should always\n                | match selected item.\n                |-------------------------------------------------*/\n                window.removeEventListener('resize', this._updateContainerHeight);\n                if(this.settings.useUpdateContainerHeight) {\n                    this.updateContainerHeight();\n                    window.addEventListener('resize', this._updateContainerHeight);\n                }\n                else {\n                    this.container.style.height = '';\n                }\n\n                /*--------------------------------------------------\n                | Store working variables for multiple items.\n                |-------------------------------------------------*/\n                this.numItemsInside = 1;\n                this.translateXOffsetProgress = 0;\n                if(this.settings.effects.slideHorizontal.on && this.settings.effects.slideHorizontal.numVisible > 1) {\n                    this.numItemsInside = this.settings.effects.slideHorizontal.numVisible;\n                    if(this.settings.effects.slideHorizontal.centerSelected) {\n                        this.translateXOffsetProgress = 0.5*(this.settings.effects.slideHorizontal.numVisible-1);\n                    }\n                }\n\n                /*--------------------------------------------------\n                | Generate markup.\n                |-------------------------------------------------*/\n                if(this.items.length > 1) {\n\n                    /*--------------------------------------------------\n                    | Generate dots.\n                    |-------------------------------------------------*/\n                    if(this.settings.generate.dots.on) {\n                        if(!this.dots) {\n                            this.dots = this.createDots();\n                        }\n                        this.container.parentNode.insertBefore(\n                            this.dots,\n                            this.settings.generate.dots.afterContainer ? this.container.nextSibling : this.container\n                        );\n                    }\n                    else {\n                        if(this.dots && this.dots.parentNode) {\n                            this.dots.parentNode.removeChild(this.dots);\n                        }\n                    }\n\n                    /*--------------------------------------------------\n                    | Generate nav.\n                    |-------------------------------------------------*/\n                    if(this.settings.generate.nav.on) {\n                        if(!this.nav) {\n                            this.nav = this.createNav();\n                        }\n                        this.container.parentNode.insertBefore(\n                            this.nav,\n                            this.settings.generate.nav.afterContainer ? this.container.nextSibling : this.container\n                        );\n                    }\n                    else {\n                        if(this.nav && this.nav.parentNode) {\n                            this.nav.parentNode.removeChild(this.nav);\n                        }\n                    }\n\n                    /*--------------------------------------------------\n                    | Generate default styles.\n                    |-------------------------------------------------*/\n                    if(this.settings.generate.styles.on) {\n                        if(this.settings.generate.styles.containerParentPosition) {\n                            this.container.parentNode.style.position = this.settings.generate.styles.containerParentPosition;\n                        }\n                        if(!this.style) {\n                            this.style = this.createStyles();\n                        }\n                        var head = document.getElementsByTagName('head')[0];\n                        head.insertBefore(this.style, head.firstChild);\n                    }\n                    else {\n                        if(this.style && this.style.parentNode) {\n                            this.style.parentNode.removeChild(this.style);\n                        }\n                    }\n                }\n\n                /*--------------------------------------------------\n                | Auto play.\n                |-------------------------------------------------*/\n                if(this.items.length > 1) {\n                    var pauseElements = [this.container];\n                    if(this.dots) {\n                        pauseElements.push(this.dots);\n                    }\n                    if(this.nav) {\n                        pauseElements.push(this.nav);\n                    }\n                    for(i=0; i<pauseElements.length; i++) {\n                        pauseElements[i].removeEventListener('mouseenter', this._pauseAuto);\n                        pauseElements[i].removeEventListener('mouseleave', this._resumeAuto);\n                    }\n                    this.pauseAuto();\n                    if(this.settings.autoPlay.on) {\n                        this.startAuto();\n                        if(this.settings.autoPlay.pauseOnHover) {\n                            for(i=0; i<pauseElements.length; i++) {\n                                pauseElements[i].addEventListener('mouseenter', this._pauseAuto);\n                                pauseElements[i].addEventListener('mouseleave', this._resumeAuto);\n                            }\n                        }\n                    }\n                }\n\n                this.selectedItem = null;\n\n                // Set slider to initial position.\n                // this.setPointer(this.targetIndex);\n                this.setPointer(this.pointerVal);\n\n                // Update dots.\n                this.updateDots();\n            },\n            setSwipeStyles: function() {\n                var i, n, j;\n                var styles = {\n                    'user-drag': 'none',\n                    'user-select': 'none',\n                    '-moz-user-select': 'none',\n                    '-webkit-user-drag': 'none',\n                    '-webkit-user-select': 'none',\n                    '-ms-user-select': 'none'\n                };\n                var imageStyles = {};\n                for(var v in styles) {\n                    imageStyles[v] = styles[v];\n                }\n                imageStyles['pointer-events'] = 'none';\n                for(i=0; i<this.numItems; i++) {\n                    if(this.settings.swipe.on) {\n                        this.css(this.items[i], styles);\n                    }\n                    else {\n                        this.removeCss(this.items[i], styles);\n                    }\n                    var imageNodes = this.items[i].getElementsByTagName('img');\n                    n = imageNodes.length;\n                    for(j=0; j<n; j++) {\n                        if(this.settings.swipe.on) {\n                            this.css(imageNodes[j], imageStyles);\n                        }\n                        else {\n                            this.removeCss(imageNodes[j], imageStyles);\n                        }\n                    }\n                }\n\n                if(this.settings.swipe.on && !this.settings.swipe.touchOnly) {\n                    this.container.style.cssText += '; cursor: -webkit-grab; cursor: grab;';\n                }\n                else {\n                    this.removeCss(this.container, ['cursor']);\n                }\n            },\n            css: function(element, styles) {\n                for(var style in styles) {\n                    element.style[style] = styles[style];\n                }\n            },\n            removeCss: function(element, styles) {\n                if(Array.isArray(styles)) {\n                    for(var i=0; i<styles.length; i++) {\n                        element.style[styles[i]] = '';\n                    }\n                }\n                else {\n                    for(var style in styles) {\n                        element.style[style] = '';\n                    }\n                }\n            },\n            addClass: function(element, className) {\n                var classes = element.className.split(' ');\n                if(classes.indexOf(className) === -1) {\n                    classes.push(className);\n                }\n                element.className = classes.join(' ');\n            },\n            removeClass: function(element, className) {\n                var classes = element.className.split(' ');\n                var idx = classes.indexOf(className);\n                if(idx !== -1) {\n                    classes.splice(idx, 1);\n                    element.className = classes.join(' ');\n                }\n            },\n            hasClass: function(element, className) {\n                var classes = element.className.split(' ');\n                return classes.indexOf(className) > -1;\n            },\n            hideOrShowElement: function(element, hide, options) {\n                if (!options) {\n                    options = this.settings;\n                }\n                if(options.hideUsingVisibility) {\n                    element.style.visibility = hide ? 'hidden' : 'visible';\n                }\n                else {\n                    element.style.display = hide ? 'none' : 'block';\n                }\n            },\n            /**\n             *  Recursively copies options.\n             */\n            setOptions: function(scope, options) {\n                for(var v in options) {\n                    var type = typeof scope[v];\n                    // Only store option if it is of correct type.\n                    if(type === typeof options[v] || scope[v] === null) {\n                        // Don't overwrite objects just copy the primitive values.\n                        if(type === 'object' && scope[v] !== null) {\n                            this.setOptions(scope[v], options[v]);\n                        }\n                        else {\n                            scope[v] = options[v];\n                        }\n                    }\n                }\n            },\n            cloneObject: function(original, clone) {\n                var v, i;\n                if(!Array.isArray(original)) {\n                    for(v in original) {\n                        if(typeof original[v] === 'object' && original[v] !== null) {\n                            clone[v] = Array.isArray(original[v]) ? [] : {};\n                            this.cloneObject(original[v], clone[v]);\n                        }\n                        else {\n                            clone[v] = original[v];\n                        }\n                    }\n                }\n                else {\n                    for(i=0; i<original.length; i++) {\n                        if(typeof original[i] === 'object' && settings[i] !== null) {\n                            clone.push(Array.isArray(original[v]) ? [] : {});\n                            this.cloneObject(original[i], clone[i]);\n                        }\n                        else {\n                            clone.push(original[i]);\n                        }\n                    }\n                }\n                return clone;\n            },\n            mergeObjects: function(original, add) {\n                var v, i;\n                for(v in add) {\n                    if(typeof add[v] === 'object' && add[v] !== null && !Array.isArray(add[v])) {\n                        if(typeof original[v] !== 'object' || original[v] === null || Array.isArray(original[v])) {\n                            original[v] = {};\n                        }\n                        this.mergeObjects(original[v], add[v]);\n                    }\n                    else {\n                        original[v] = add[v];\n                    }\n                }\n                return original;\n            },\n            createDots: function() {\n                /**\n                 *  Dots.\n                 */\n                var that = this;\n                var container = null;\n                var markup = this.settings.generate.dots.markup;\n                if (markup && markup.container) {\n                    container = new DOMParser().parseFromString(markup.container, \"text/html\").querySelector('body').firstChild;\n                }\n                if (!container) {\n                    container = document.createElement(\"UL\");\n                    container.setAttribute('class', 'tin-slide-dots');\n                }\n                var liClickHandler = function(event) {\n                    that.onDotClick(event);\n                };\n                this.dotsItems = [];\n                for(var i=0; i<this.numItems; i++) {\n                    var dot = markup && markup.dot ? new DOMParser().parseFromString(markup.dot, \"text/html\").querySelector('body').firstChild : null;\n                    if (!dot) {\n                        dot = document.createElement('LI');\n                        dot.setAttribute('class', 'tin-slide-dot-'+i);\n                    }\n                    dot.setAttribute('tin-slide-index', i);\n                    dot.style.cursor = 'pointer';\n                    container.appendChild(dot);\n                    this.dotsItems.push(dot);\n                    dot.addEventListener('click', liClickHandler);\n                }\n                return container;\n            },\n            createNav: function() {\n                /**\n                 *  Next / prev.\n                 */\n                var that = this;\n\n                var markup = this.settings.generate.nav.markup;\n                if (markup && markup.container) {\n                    container = new DOMParser().parseFromString(markup.container, \"text/html\").querySelector('body').firstChild;\n                }\n                if (!container) {\n                    container = document.createElement(\"NAV\");\n                    container.setAttribute('class', 'tin-slide-next-prev');\n                }\n\n                var prev = markup && markup.prev ? new DOMParser().parseFromString(markup.prev, \"text/html\").querySelector('body').firstChild : null;\n                if (!prev) {\n                    prev = document.createElement(\"DIV\");\n                    prev.setAttribute('class', 'tin-slide-prev');\n                }\n                prev.style.cursor = 'pointer';\n                // Added to prevent text selection from double click.\n                prev.addEventListener('mousedown', function(event) {\n                    event.preventDefault();\n                });\n                prev.addEventListener('click', function(event) {\n                    this.previous();\n                }.bind(this));\n                container.appendChild(prev);\n\n                var next = markup && markup.next ? new DOMParser().parseFromString(markup.next, \"text/html\").querySelector('body').firstChild : null;\n                if (!next) {\n                    next = document.createElement(\"DIV\");\n                    next.setAttribute('class', 'tin-slide-next');\n                }\n                next.style.cursor = 'pointer';\n                // Added to prevent text selection from double click.\n                next.addEventListener('mousedown', function(event) {\n                    event.preventDefault();\n                });\n                next.addEventListener('click', function(event) {\n                    this.next();\n                }.bind(this));\n                container.appendChild(next);\n\n                return container;\n            },\n\n            createStyles: function() {\n                var styles = [];\n                styles.push(\".tin-slide-prev, .tin-slide-next {position: absolute;left: 10px;top: 50%;}\");\n                styles.push(\".tin-slide-prev:before, .tin-slide-prev:after, .tin-slide-next:before, .tin-slide-next:after {content: '';display: block;width: 0;height: 0;position: absolute;top: 0;-webkit-transform: translateY(-50%);-ms-transform: translateY(-50%);-o-transform: translateY(-50%);transform: translateY(-50%);}\");\n                styles.push(\".tin-slide-prev:before, .tin-slide-next:before {opacity: 0.1;-webkit-transition: opacity 200ms cubic-bezier(0.48, 0.01, 0.21, 1);-o-transition: opacity 200ms cubic-bezier(0.48, 0.01, 0.21, 1);transition: opacity 200ms cubic-bezier(0.48, 0.01, 0.21, 1);}\");\n                styles.push(\".tin-slide-prev:hover:before, .tin-slide-next:hover:before {opacity: 0;}\");\n                styles.push(\".tin-slide-prev:before {left: 0;border-top: 23px solid transparent;border-bottom: 23px solid transparent;border-right: 41px solid black;margin-left: -4px;}\");\n                styles.push(\".tin-slide-prev:after {left: 0;border-top: 20px solid transparent;border-bottom: 20px solid transparent;border-right: 35px solid rgba(255, 255, 255, 0.4);-webkit-transition: border-right-color 200ms cubic-bezier(0.48, 0.01, 0.21, 1);-o-transition: border-right-color 200ms cubic-bezier(0.48, 0.01, 0.21, 1);transition: border-right-color 200ms cubic-bezier(0.48, 0.01, 0.21, 1);}\");\n                styles.push(\".tin-slide-prev:hover:after {border-right-color: white;}\");\n                styles.push(\".tin-slide-next {left: inherit;right: 10px;}\");\n                styles.push(\".tin-slide-next:before {right: 0;border-top: 23px solid transparent;border-bottom: 23px solid transparent;border-left: 41px solid black;margin-right: -4px;}\");\n                styles.push(\".tin-slide-next:after {right: 0;border-top: 20px solid transparent;border-bottom: 20px solid transparent;border-left: 35px solid rgba(255, 255, 255, 0.4);-webkit-transition: border-left-color 200ms cubic-bezier(0.48, 0.01, 0.21, 1);-o-transition: border-left-color 200ms cubic-bezier(0.48, 0.01, 0.21, 1);transition: border-left-color 200ms cubic-bezier(0.48, 0.01, 0.21, 1);}\");\n                styles.push(\".tin-slide-next:hover:after {border-left-color: white;}\");\n                styles.push(\".tin-slide-dots {position: absolute;bottom: 10px;left: 50%;-webkit-transform: translateX(-50%);-ms-transform: translateX(-50%);-o-transform: translateX(-50%);transform: translateX(-50%);}\");\n                styles.push(\".tin-slide-dots li {-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;width: 16px;height: 16px;border-radius: 8px;background-color: transparent;border: 2px solid white;margin-right: 5px;opacity: 0.9;-webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);-webkit-transition: background-color 200ms cubic-bezier(0.48, 0.01, 0.21, 1);-o-transition: background-color 200ms cubic-bezier(0.48, 0.01, 0.21, 1);transition: background-color 200ms cubic-bezier(0.48, 0.01, 0.21, 1);}\");\n                styles.push(\".tin-slide-dots li:hover {background-color: rgba(255, 255, 255, 0.5);}\");\n                styles.push(\".tin-slide-dots li.on {background-color: white; }\");\n                styles.push(\".tin-slide-outside {pointer-events: none;}\");\n\n                var style = document.createElement('STYLE');\n                style.innerHTML = styles.join(\"\\n\");\n                return style;\n            },\n\n            /**\n             *  Update the slider.\n             */\n            setPointer: function(val) {\n\n                var i, index;\n\n                this.pointerVal = val;\n                var pointer = val % this.numItems;\n                if(pointer < 0 && this.settings.loop) {\n                    pointer += this.numItems;\n                }\n                this.pointer = pointer;\n\n                var visibleItems = [];\n\n                /*--------------------------------------------------\n                | If items should not be hidden,\n                | slide all items.\n                |-------------------------------------------------*/\n                if(!this.settings.hideItems) {\n                    for(i=0; i<this.numItems; i++) {\n                        visibleItems.push(this.items[i]);\n                    }\n                }\n                else {\n                    // Visible items first add the floor index.\n                    var visiblePointer = pointer - this.translateXOffsetProgress;\n                    // if(this.settings.effects.slideHorizontal.on && this.settings.effects.slideHorizontal.numVisible > 1 && this.settings.effects.slideHorizontal.centerSelected) {\n                    //     visiblePointer -= this.translateXOffsetProgress;\n                    // }\n                    if(visiblePointer < 0 && this.settings.loop) {\n                        visiblePointer += this.numItems;\n                    }\n                    var floorPointer = Math.floor(visiblePointer);\n                    if(floorPointer >= 0) {\n                        visibleItems.push(this.items[floorPointer]);\n                    }\n\n                    // Add ceil index if pointer is not at destination.\n                    for(i=1; i<=this.numItemsInside-(visiblePointer === floorPointer ? 1 : 0); i++) {\n                        // var ceilPointer = Math.ceil(this.pointer);\n                        var ceilPointer = floorPointer+i;\n                        if(this.settings.loop) {\n                            ceilPointer %= this.numItems;\n                        }\n                        if(ceilPointer < this.items.length && visibleItems.indexOf(this.items[ceilPointer]) === -1) {\n                            visibleItems.push(this.items[ceilPointer]);\n                        }\n                    }\n                }\n\n                // Mark previously visible items for check.\n                for(index in this.itemsVisible) {\n                    this.itemsVisible[index] = null;\n                }\n                var item;\n                var len=visibleItems.length;\n                var relativeItem = false;\n                for(i=0; i<len; i++) {\n                    item = visibleItems[i];\n                    // If previously non visible item becomes visible.\n                    if(this.itemsVisible[item.tinSlideIndex] === undefined) {\n                        this.hideOrShowElement(item, false);\n                    }\n                    // Store progress.\n                    var progress = this.pointer - item.tinSlideIndex;\n                    if(!this.translateXOffsetProgress) {\n                        if(progress > 1) {\n                            progress -= this.numItems;\n                        }\n                    }\n                    else {\n                        if(progress > this.numHalfItems) {\n                            progress -= this.numItems;\n                        }\n                        else if(progress < -this.numHalfItems) {\n                            progress += this.numItems;\n                        }\n                    }\n                    this.itemsVisible[item.tinSlideIndex] = progress;\n\n                    // Make the most visible item relatively positioned,\n                    // and put it in front of the others.\n                    if(!(progress > 0.5 || progress < -0.5) && !relativeItem) {\n                        relativeItem = true;\n\n                        // If new item becomes selected.\n                        if(this.selectedItem !== item) {\n                            // Remove selected class from previously selected.\n                            if(this.selectedItem) {\n                                this.removeClass(this.selectedItem, 'tin-slide-selected');\n                            }\n                            this.selectedItem = item;\n                            this.addClass(item, 'tin-slide-selected');\n\n                            // All slides absolute positioned if slider has a defined height\n                            // (in separate CSS) or ratio.\n                            if(!(this.settings.useUpdateContainerHeight || this.settings.ratio || this.settings.hasHeight)) {\n                                item.style.position = 'relative';\n                            }\n                            if(this.settings.zIndex) {\n                                item.style.zIndex = this.settings.zIndex;\n                            }\n                            if(this.settings.moveSelectedItem) {\n                                this.container.removeChild(item);\n                                this.container.appendChild(item);\n                            }\n\n                            /*--------------------------------------------------\n                            | Emit event with selected item.\n                            |-------------------------------------------------*/\n                            tinSlide.emit('itemSelected', {\n                                index: item.tinSlideIndex,\n                                item: item\n                            });\n                        }\n                    }\n                    else {\n                        item.style.position = 'absolute';\n                        item.style.zIndex = '';\n                    }\n                }\n                // Hide previously visible items no longer visible.\n                for(index in this.itemsVisible) {\n                    if(this.itemsVisible[index] === null) {\n                        delete this.itemsVisible[index];\n                        item = this.items[index];\n                        this.hideOrShowElement(item, true);\n                        item.style.position = 'absolute';\n                        item.style.zIndex = '';\n                    }\n                }\n                this.applySlideEffect();\n            },\n\n            /**\n             *  Next/ previous.\n             */\n            next: function(isAuto) {\n                var status = false;\n                if(this.items.length > 1) {\n                    // Stop auto play if not an auto play navigation.\n                    if(isAuto !== true) {\n                        if(this.settings.autoPlay.stopOnNavigation) {\n                            this.stopAuto();\n                        }\n                    }\n                    if(!this.timerSwipe || this.swipeXAbs < this.settings.swipe.releaseRequiredSwipeX) {\n                        // Navigate if slider is looping, or if there are previous slides.\n                        if(this.settings.loop || this.targetIndex < this.numItems - 1) {\n                            this.targetIndex++;\n                            this.targetVal = this.targetIndex;\n                            this.animateToTarget();\n                            status = true;\n                        }\n                        else if(!isAuto && this.settings.useNonLoopingHint) {\n                            this.targetVal = this.numItems - 1 + 0.05;\n                            this.animateToTarget();\n                            var that = this;\n                            this.timerNonLoopingHint = setTimeout(function() {\n                                that.targetVal = that.targetIndex;\n                                that.animateToTarget();\n                            }, 200);\n                        }\n                    }\n                }\n                return status;\n            },\n            previous: function(isAuto) {\n                var status = false;\n                if(this.items.length > 1) {\n                    // Stop auto play if not an auto play navigation.\n                    if(isAuto !== true) {\n                        if(this.settings.autoPlay.stopOnNavigation) {\n                            this.stopAuto();\n                        }\n                    }\n                    if(!this.timerSwipe || this.swipeXAbs < this.settings.swipe.releaseRequiredSwipeX) {\n                        // Navigate if slider is looping, or if there are previous slides.\n                        if(this.settings.loop || this.targetIndex > 0) {\n                            this.targetIndex--;\n                            this.targetVal = this.targetIndex;\n                            this.animateToTarget();\n                            status = true;\n                        }\n                        else if(!isAuto && this.settings.useNonLoopingHint) {\n                            this.targetVal = -0.05;\n                            this.animateToTarget();\n                            var that = this;\n                            this.timerNonLoopingHint = setTimeout(function() {\n                                that.targetVal = that.targetIndex;\n                                that.animateToTarget();\n                            }, 200);\n                        }\n                    }\n                }\n                return status;\n            },\n            /**\n             *  Swipe.\n             */\n            // Performs the actual grabbing  stops slider etc.\n            onSwipePress: function(event) {\n\n                if(this.items.length > 1) {\n                    var isTouch = event.type === 'touchstart';\n\n                    // If link was pressed do nothing.\n                    if(event.target.nodeName === 'A') {\n                        return;\n                    }\n\n                    /**\n                     *  Don't respond to right click.\n                     */\n                    var nativeEvent = event;\n                    if((nativeEvent.button !== undefined && nativeEvent.button === 2) || (nativeEvent.which !== undefined && nativeEvent.which === 3)) {\n                        return;\n                    }\n\n                    // this.swipePressX = isTouch ? event.layerX : event.clientX;\n                    this.swipePressX = isTouch ? event.touches[0].clientX : event.clientX;\n\n                    this.swipeX = 0;\n                    this.swipeXAbs = 0;\n\n                    if(this.settings.swipe.pressMoveBeforeInvokeGrabbing) {\n                        document.addEventListener('touchmove', this.onSwipePressMove);\n                        document.addEventListener('mousemove', this.onSwipePressMove);\n                        document.addEventListener('touchend', this.clearSwipePressMove);\n                        document.addEventListener('mouseup', this.clearSwipePressMove);\n                    }\n                    else {\n                        this.onTimerSwipePress();\n                    }\n\n                    // Stop event useful if slider is a child slider.\n                    if(this.loop || (this.targetIndexWithinBounds>0 && this.targetIndexWithinBounds<this.numItems-1)) {\n                        event.stopPropagation();\n                    }\n                }\n            },\n\n            onSwipePressMove: function() {\n                this.clearSwipePressMove();\n                this.onTimerSwipePress();\n            },\n\n            clearSwipePressMove: function() {\n                document.removeEventListener('touchmove', this.onSwipePressMove);\n                document.removeEventListener('mousemove', this.onSwipePressMove);\n                document.removeEventListener('touchend', this.clearSwipePressMove);\n                document.removeEventListener('mouseup', this.clearSwipePressMove);\n            },\n\n            // Performs the actual grabbing  stops slider etc.\n            onTimerSwipePress: function() {\n\n                if(!this.settings.swipe.touchOnly) {\n                    this.container.style.cssText += '; cursor: -webkit-grabbing; cursor: grabbing;';\n                }\n\n                // Clear timer used for non looping hint.\n                clearTimeout(this.timerNonLoopingHint);\n\n                // Stop auto play.\n                if(this.settings.autoPlay.stopOnNavigation) {\n                    this.pauseAuto();\n                }\n\n                if(this.timerAnimate) {\n                    // clearInterval(this.timerAnimate);\n                    cancelAnimationFrame(this.timerAnimate);\n                    this.timerAnimate = 0;\n                }\n\n                // Calculate how far the slide will travel upon press.\n                var step = 0;\n                var stepAdd = this.step;\n                for(var i=0; i<25; i++) {\n                    stepAdd *= this.settings.swipe.stepFactor;\n                    step += stepAdd;\n                }\n\n                this.swipePressPointerVal = this.pointerVal + step;\n                this.swipeTargetVal = this.swipePressPointerVal;\n\n                document.addEventListener('touchmove', this._onSwipeMove);\n                document.addEventListener('touchend', this._onSwipeRelease);\n                if(!this.settings.swipe.touchOnly) {\n                    document.addEventListener('mousemove', this._onSwipeMove);\n                    document.addEventListener('mouseup', this._onSwipeRelease);\n                }\n\n                this.startSwipeTimer();\n            },\n            onSwipeMove: function(event) {\n\n                // Check if child slider is swiping.\n                // If so, lock this parent slider until child slider no longer swipes (first / last slide reached).\n                // Child sliders should probably have loop=false. Otherwise this parent slider will\n                // never slide again once child slider has been grabbed.\n                if(event.tinSlideMoved === undefined) {\n\n                    var isTouch = event.type === 'touchmove';\n                    this.swipeIsTouch = isTouch;\n\n                    var containerWidth = this.getContainerWidth();\n                    if(containerWidth) {\n\n                        /**\n                         * Check if touch scrolls an element in the slider.\n                         */\n                        if(isTouch && event.target !== undefined && event.target !== this.container) {\n                            var t = event.target;\n                            if(t.scrollWidth > t.offsetWidth) {\n                                this.swipeScrollsElementCounter++;\n                                if(this.swipeScrollsElementCounter < 4 || (t.scrollLeft > 0 && (t.scrollLeft + t.offsetWidth) < t.scrollWidth)) {\n                                    event.tinSlideMoved = this;\n                                    return;\n                                }\n                            }\n                        }\n\n                        // var currentX = isTouch ? event.layerX : event.clientX;\n                        var currentX = isTouch ? event.touches[0].clientX: event.clientX;\n                        if(currentX === undefined) {\n                            return;\n                        }\n\n                        if(this.swipePressX === undefined) {\n                            this.swipePressX = currentX;\n                        }\n\n                        this.swipeX = this.swipePressX - currentX;\n\n                        this.swipeXAbs = this.swipeX < 0 ? -this.swipeX : this.swipeX;\n\n                        if(!this.swipePreventDefault) {\n                            if(this.swipeXAbs > 10) {\n                                this.swipePreventDefault = true;\n                            }\n                        }\n\n                        var swipeTargetVal = this.swipePressPointerVal + (this.swipeX / containerWidth);\n                        if(!this.settings.loop) {\n                            var offset = this.settings.useNonLoopingHint ? 0.05 : 0;\n                            if(swipeTargetVal < -offset) {\n                                swipeTargetVal = -offset;\n                            }\n                            else if(swipeTargetVal > this.numItems - 1 + offset) {\n                                swipeTargetVal = this.numItems - 1 + offset;\n                            }\n                            else {\n                                event.tinSlideMoved = this;\n                            }\n                        }\n                        else {\n                            event.tinSlideMoved = this;\n                        }\n\n                        this.swipeTargetVal = swipeTargetVal;\n                        var targetIndexWithinBounds = Math.round(this.swipeTargetVal) % this.numItems;\n                        if(targetIndexWithinBounds < 0) {\n                            targetIndexWithinBounds += this.numItems;\n                        }\n                        this.targetIndexWithinBounds = targetIndexWithinBounds;\n                        this.updateDots();\n                    }\n                }\n            },\n            onSwipeRelease: function(event) {\n\n                document.removeEventListener('touchmove', this._onSwipeMove);\n                document.removeEventListener('touchend', this._onSwipeRelease);\n                if(!this.settings.swipe.touchOnly) {\n                    document.removeEventListener('mousemove', this._onSwipeMove);\n                    document.removeEventListener('mouseup', this._onSwipeRelease);\n                    this.container.style.cssText += '; cursor: -webkit-grab; cursor: grab;';\n                }\n\n                this.swipePreventDefault = false;\n                this.swipeScrollsElementCounter = 0;\n\n                if(this.swipeXAbs >= this.settings.swipe.releaseRequiredSwipeX) {\n\n                    var limit = 0.04;\n                    var targetIndex;\n                    if(this.step < -limit) {\n                        // Stop auto play.\n                        if(this.settings.autoPlay.stopOnNavigation) {\n                            this.stopAuto();\n                        }\n                        targetIndex = Math.floor(this.pointerVal);\n                    }\n                    else if(this.step > limit) {\n                        // Stop auto play.\n                        if(this.settings.autoPlay.stopOnNavigation) {\n                            this.stopAuto();\n                        }\n                        targetIndex = Math.ceil(this.pointerVal);\n                    }\n                    else {\n                        // Calculate how far the slide will travel upon release.\n                        var step = this.step * 15;\n                        var stepAdd = this.step;\n                        for(var i=0; i<80; i++) {\n                            stepAdd *= this.settings.swipe.stepFactor;\n                            step += stepAdd;\n                        }\n                        if(step > 1) {\n                            step = 1;\n                        }\n                        else if(step < -1) {\n                            step = -1;\n                        }\n                        var targetVal = this.pointerVal + step;\n                        targetIndex = Math.round(targetVal);\n\n                        if(this.settings.autoPlay.stopOnNavigation) {\n                            if(targetIndex === this.targetIndex) {\n                                if(event.type === 'touchend') {\n                                    this.resumeAuto();\n                                }\n                            }\n                            else {\n                                this.stopAuto();\n                            }\n                        }\n                    }\n\n                    this.choke = 1;\n\n                    // Wait a few milliseconds, otherwise prev / next will be invoked.\n                    setTimeout(function() {\n                        if(this.timerSwipe) {\n                            cancelAnimationFrame(this.timerSwipe);\n                            this.timerSwipe = 0;\n                        }\n                        this.targetIndex = targetIndex;\n                        this.targetVal = this.targetIndex;\n                        this.animateToTarget();\n                    }.bind(this), 1);\n                }\n                else {\n                    cancelAnimationFrame(this.timerSwipe);\n                    this.timerSwipe = 0;\n\n                    if(event.type === 'touchend') {\n                        this.resumeAuto();\n                    }\n                }\n\n            },\n            startSwipeTimer: function() {\n                if(!this.timerSwipe) {\n                    this.timerSwipe = requestAnimationFrame(this._onTimerSwipe);\n                }\n            },\n            onTimerSwipe: function() {\n                var pointerVal = this.pointerVal;\n                var diff = this.swipeTargetVal - pointerVal;\n                var step = diff * (!this.swipeIsTouch ? this.settings.swipe.stepFactor : this.settings.swipe.stepFactorTouch);\n                this.step = step;\n                this.stepAbs = this.step < 0 ? -this.step : this.step;\n                pointerVal += step;\n                this.setPointer(pointerVal);\n                this.timerSwipe = requestAnimationFrame(this._onTimerSwipe);\n            },\n            getContainerWidth: function() {\n                if(!this.containerWidth) {\n                    this.containerWidth = container.offsetWidth;\n                }\n                return this.containerWidth;\n            },\n\n            /**\n             *  Animate to index.\n             */\n            animateTo: function(index) {\n                this.targetIndex = index % this.numItems;\n                if(this.targetIndex < 0) {\n                    this.targetIndex += this.numItems;\n                }\n                this.targetIndexWithinBounds = this.targetIndex;\n                this.updateDots();\n                var pointerVal = this.pointerVal % this.numItems;\n                // Adjust pointerVal so slider chooses optimal direction.\n                if(this.settings.loop) {\n                    var diff = pointerVal - this.targetIndex;\n                    if(diff > this.numHalfItems) {\n                        pointerVal -= this.numItems;\n                    }\n                    else if(diff < -this.numHalfItems) {\n                        pointerVal += this.numItems;\n                    }\n                }\n                this.pointerVal = pointerVal;\n                this.targetVal = this.targetIndex;\n                this.animateToTarget();\n            },\n            animateToTarget: function() {\n                // Clear timer used for non looping hint.\n                clearTimeout(this.timerNonLoopingHint);\n                // Update dots.\n                var targetIndexWithinBounds = this.targetIndex % this.numItems;\n                if(targetIndexWithinBounds < 0) {\n                    targetIndexWithinBounds += this.numItems;\n                }\n                this.targetIndexWithinBounds = targetIndexWithinBounds;\n                this.updateDots();\n                if(this.settings.useUpdateContainerHeight) {\n                    this.updateContainerHeight();\n                }\n                if(!this.timerAnimate) {\n                    // var that = this;\n                    // this.timerAnimate = setInterval(function() {\n                    //     that.onAnimationTimer();\n                    // }, 25);\n\n                    this.timerAnimate = requestAnimationFrame(this._onAnimationTimer);\n                }\n            },\n            onAnimationTimer: function() {\n                var pointerVal = this.pointerVal;\n                var diff = this.targetVal - pointerVal;\n                var diffAbs = diff < 0 ? -diff : diff;\n\n                if(diffAbs < this.settings.stepSnap) {\n                    this.step = this.stepAbs = 0;\n                    this.setPointer(this.targetVal);\n                    cancelAnimationFrame(this.timerAnimate);\n                    this.timerAnimate = 0;\n                }\n                else {\n                    var step = (diff) * this.settings.stepFactor;\n                    // If slider continues in the same direction.\n                    if(step * this.step >= 0) {\n                        this.step = (diff) * this.settings.stepFactor;\n                        // Release the choke for acceleration.\n                        if(this.choke < 1) {\n                            this.choke = (this.choke * this.settings.chokeReleaseFactor) + (this.choke || this.settings.chokeReleaseStep ? this.settings.chokeReleaseStep : 0.05);\n                        }\n                        // Decrease choke when target is approached.\n                        if(this.choke > diffAbs) {\n                            this.choke = diffAbs * (0.5 + this.settings.chokeReturnFactor);\n                        }\n                        if(this.choke > 1) {\n                            this.choke = 1;\n                        }\n                        if(this.step > this.settings.stepMin || this.step < -this.settings.stepMin) {\n                            var stepMax = this.choke * this.settings.stepMax;\n                            if(this.step > stepMax) {this.step = stepMax;}\n                            else if(this.step < -stepMax) {this.step = -stepMax;}\n                            if(!(this.step > this.settings.stepMin || this.step < -this.settings.stepMin)) {\n                                this.step = this.settings.stepMin * (this.step < 0 ? -1 : 1);\n                            }\n                        }\n                        this.stepAbs = this.step < 0 ? -this.step : this.step;\n                        pointerVal += this.step;\n                    }\n                    // If slider changes direction  break and turn.\n                    else {\n                        step = this.step * (1-this.settings.stepTurnBreakFactor);\n                        // If turning break has completed.\n                        if(!(step > this.settings.stepSnap || step < -this.settings.stepSnap)) {\n                            this.step = 0;\n                        } else {\n                            this.step = step;\n                        }\n                        pointerVal += step;\n                    }\n                    this.stepAbs = this.step < 0 ? -this.step : this.step;\n                    this.setPointer(pointerVal);\n                    this.timerAnimate = requestAnimationFrame(this._onAnimationTimer);\n                }\n            },\n            goTo: function(index) {\n                // Clear timer used for non looping hint.\n                clearTimeout(this.timerNonLoopingHint);\n                // Stop auto play.\n                if(this.settings.autoPlay.stopOnNavigation) {\n                    this.stopAuto();\n                }\n                // Stop animation.\n                if(this.timerAnimate) {\n                    // clearInterval(this.timerAnimate);\n                    cancelAnimationFrame(this.timerAnimate);\n                    this.timerAnimate = 0;\n                }\n                // Calculate correct target index.\n                this.targetIndex = index % this.numItems;\n                if(this.targetIndex < 0) {\n                    this.targetIndex += this.numItems;\n                }\n                this.targetIndexWithinBounds = this.targetIndex;\n                this.updateDots();\n                if(this.settings.useUpdateContainerHeight) {\n                    this.updateContainerHeight();\n                }\n                this.setPointer(this.targetIndexWithinBounds);\n            },\n\n            updateContainerHeight: function(fromSubSlideWithHeight) {\n\n                var parentSlides;\n\n                // If this action was initiated by the slider itself.\n                if(fromSubSlideWithHeight === undefined) {\n                    // Don't do anything if the slider has parent sliders.\n                    // Let the top most slider handle the action.\n                    parentSlides = this.getParentSlides();\n                    if(parentSlides.length) {\n                        parentSlides[0].updateContainerHeight();\n                    }\n                    // If this is the top most slider.\n                    else {\n                        // Check if slider has sub slides.\n                        // Update height on the inner most slider.\n                        // Inner most slider will then traverse upwards and update\n                        // parent slides all the way up to this one.\n                        var subSlides = this.getSubSlides();\n                        if(subSlides.length) {\n                            subSlides[0].updateContainerHeightFromParent();\n                        }\n                        else {\n                            this.doUpdateContainerHeight();\n                        }\n                    }\n                }\n\n                // If slider was instructed by a sub slider to update height.\n                // Also enters here if this is the inner most slider (with fromSubSlideWithHeight = 0).\n                else {\n                    this.doUpdateContainerHeight(fromSubSlideWithHeight);\n                    // Update parent slider.\n                    parentSlides = this.getParentSlides().reverse();\n                    if(parentSlides.length) {\n                        parentSlides[0].updateContainerHeight(this.containerHeight);\n                    }\n                }\n\n            },\n\n            doUpdateContainerHeight: function(minHeight) {\n                var id = this.container.getAttribute('id');\n                if(minHeight === undefined) {\n                    minHeight = 0;\n                }\n                var containerHeight = this.items[this.targetIndexWithinBounds].offsetHeight;\n                if(!containerHeight) {\n                    this.items[this.targetIndexWithinBounds].style.display = 'block';\n                    containerHeight = this.items[this.targetIndexWithinBounds].offsetHeight;\n                }\n                if(containerHeight < minHeight) {\n                    containerHeight = minHeight;\n                }\n                if(containerHeight > 0 && this.containerHeight !== containerHeight) {\n                    this.containerHeight = containerHeight;\n                    this.css(this.container, {\n                        height: containerHeight+'px'\n                    });\n                }\n            },\n\n            // Update this inner most slider.\n            updateContainerHeightFromParent: function() {\n                this.updateContainerHeight(0);\n            },\n\n            getParentSlides: function() {\n                var slides = [];\n                function checkParentNode(element) {\n                    if(element.parentNode && element.parentNode !== undefined) {\n                        if(element.parentNode.tinSlide !== undefined) {\n                            slides.push(element.parentNode.tinSlide);\n                        }\n                        checkParentNode(element.parentNode);\n                    }\n                }\n                checkParentNode(this.container);\n                return slides.reverse();\n            },\n\n            getSubSlides: function() {\n                var slides = [];\n                function checkChildNodes(element) {\n                    for(var i=0, n=element.childNodes.length; i<n; i++) {\n                        if(element.childNodes[i].tinSlide !== undefined) {\n                            slides.push(element.childNodes[i].tinSlide);\n                            checkChildNodes(element.childNodes[i].tinSlide.getCurrentItem());\n                        }\n                        else {\n                            checkChildNodes(element.childNodes[i]);\n                        }\n                    }\n                }\n                // checkChildNodes(this.container);\n                checkChildNodes(this.items[this.targetIndexWithinBounds]);\n                return slides.reverse();\n            },\n\n            /**\n             *  Apply desired slide effect:\n             *   - Horizontal slide\n             *   - Fade\n             *   - Scale\n             *   - Motion blur\n             */\n            applySlideEffect: function() {\n                for(var index in this.itemsVisible) {\n\n                    var item = this.items[index];\n                    var progress = this.itemsVisible[index];\n                    var progressAbs = progress < 0 ? -progress : progress;\n                    var transforms = [];\n\n                    // Horizontal slide.\n                    if(this.settings.effects.slideHorizontal.on) {\n                        var translateXProgress = progress - this.translateXOffsetProgress;\n                        var translateX = ((this.settings.effects.slideHorizontal.offset*100)*-translateXProgress)+'%';\n                        var translateY = !this.settings.verticallyCenter ? 0 : '-50%';\n                        transforms.push('translate3d('+translateX+', '+translateY+', 0)');\n\n                        /*--------------------------------------------------\n                        | Add class to visible items outside of slider.\n                        | Mostly usable when hideItems = false.\n                        |-------------------------------------------------*/\n                        if(translateXProgress > 0.75 ||translateXProgress < -(this.settings.effects.slideHorizontal.numVisible-0.25)) {\n                            if(this.itemsOutside[index] === undefined) {\n                                this.itemsOutside[index] = item;\n                                this.addClass(item, 'tin-slide-outside');\n                            }\n                        }\n                        else {\n                            if(this.itemsOutside[index] !== undefined) {\n                                delete this.itemsOutside[index];\n                                this.removeClass(item, 'tin-slide-outside');\n                            }\n                        }\n                    }\n\n                    // Scale\n                    if(this.settings.effects.scale.on) {\n                        var scale;\n                        if(progressAbs < this.settings.effects.scale.maxAt) {\n                            scale = this.settings.effects.scale.max;\n                        }\n                        else if(progressAbs < this.settings.effects.scale.minAt) {\n                            var scaleFactor = 1 - ((progressAbs - this.settings.effects.scale.maxAt) / (this.settings.effects.scale.minAt - this.settings.effects.scale.maxAt));\n                            scale = this.settings.effects.scale.min + scaleFactor * (this.settings.effects.scale.max - this.settings.effects.scale.min);\n                        }\n                        else {\n                            scale = this.settings.effects.scale.min;\n                        }\n                        transforms.push('scale('+scale+', '+scale+')');\n                    }\n\n                    // Apply accumulated transforms.\n                    if(transforms.length) {\n                        item.style.transform = transforms.join(' ');\n                    }\n                    else if(item.style.transform !== '') {\n                        item.style.transform = '';\n                    }\n\n                    // Fade\n                    if(this.settings.effects.fade.on) {\n                        var opacity;\n                        if(progressAbs < this.settings.effects.fade.maxAt) {\n                            opacity = this.settings.effects.fade.max;\n                        }\n                        else if(progressAbs < this.settings.effects.fade.minAt) {\n                            var opacityFactor = 1 - ((progressAbs - this.settings.effects.fade.maxAt) / (this.settings.effects.fade.minAt - this.settings.effects.fade.maxAt));\n                            opacity = this.settings.effects.fade.min + opacityFactor * (this.settings.effects.fade.max - this.settings.effects.fade.min);\n                        }\n                        else {\n                            opacity = this.settings.effects.fade.min;\n                        }\n                        item.style.opacity = opacity;\n                    }\n                    else if(item.style.opacity !== '') {\n                        item.style.opacity = '';\n                    }\n                }\n\n                // Motion blur.\n                if(this.settings.effects.motionBlur.on) {\n                    this.applyBlur();\n                }\n            },\n            /**\n             *  Speed based blur.\n             */\n            applyBlur: function() {\n                var blurFactor = this.stepAbs - this.settings.effects.motionBlur.stepMin;\n                if(blurFactor < 0) {blurFactor = 0;}\n                var blur = blurFactor * this.settings.effects.motionBlur.factor;\n                if(blur > this.settings.effects.motionBlur.maxPixels) {blur = this.settings.effects.motionBlur.maxPixels;}\n                var cssBlur = blur ? 'blur('+blur+'px)' : '';\n                for(var index in this.itemsVisible) {\n                    this.items[index].style.filter = cssBlur;\n                }\n            },\n            updateDots: function() {\n                if(this.dots && this.currentDotIndex !== this.targetIndexWithinBounds) {\n                    var dot;\n                    if(this.currentDotIndex !== null) {\n                        dot = this.dotsItems[this.currentDotIndex];\n                        if(dot) {\n                            this.removeClass(dot, 'on');\n                        }\n                    }\n                    this.currentDotIndex = this.targetIndexWithinBounds;\n                    dot = this.dotsItems[this.currentDotIndex];\n                    if(dot) {\n                        this.addClass(dot, 'on');\n                    }\n                }\n            },\n            onDotClick: function(event) {\n                // Stop auto play.\n                if(this.settings.autoPlay.stopOnNavigation) {\n                    this.stopAuto();\n                }\n                var index = parseInt(event.target.getAttribute('tin-slide-index'), 10);\n                this.animateTo(index);\n            },\n            startAuto: function() {\n                if(this.autoPlayState === 'stopped') {\n                    return;\n                }\n                if(this.autoPlayState !== 'started') {\n                    this.autoPlayState = 'started';\n                    this.resumeAuto();\n                }\n            },\n            pauseAuto: function() {\n                if(this.autoPlayState === 'stopped') {\n                    return;\n                }\n                // Don't do anything if auto play isn't activated.\n                if(this.autoPlayState) {\n                    this.autoPlayState = 'paused';\n                    clearInterval(this.timerAutoPlay);\n                    this.timerAutoPlay = 0;\n                }\n            },\n            resumeAuto: function() {\n                if(this.autoPlayState === 'stopped') {\n                    return;\n                }\n                // Don't do anything if auto play isn't activated.\n                if(this.autoPlayState) {\n                    this.autoPlayState = 'started';\n                    clearInterval(this.timerAutoPlay);\n                    this.timerAutoPlay = setInterval(function() {\n                        // Only auto slide if swiping is not active.\n                        // Only auto slide if slider is visible.\n                        // Also don't slide if window isn't visible.\n                        if(!this.timerSwipe && this.container.clientHeight && !this.hasClass(this.container, 'window-hidden')) {\n                            var status = this.autoPlayForwards ? this.next(true) : this.previous(true);\n                            // Change direction if navigation failed.\n                            if(!status) {\n                                this.autoPlayForwards = !this.autoPlayForwards;\n                                status = this.autoPlayForwards ? this.next(true) : this.previous(true);\n                            }\n                        }\n                    }.bind(this), this.settings.autoPlay.time);\n                }\n            },\n            stopAuto: function() {\n                if(this.autoPlayState === 'stopped') {\n                    return;\n                }\n                if(this.autoPlayState) {\n                    this.pauseAuto();\n                    this.autoPlayState = 'stopped';\n                }\n            },\n            imageLoaded: function(event) {\n                if(this.settings.useUpdateContainerHeight) {\n                    this.updateContainerHeight();\n                }\n            }\n        };\n\n        /**\n         *  Public methods.\n         */\n        var events = {};\n\n        tinSlide = {\n            next: function(index) {\n                logic.next();\n            },\n            previous: function(index) {\n                logic.previous();\n            },\n            animateTo: function(index) {\n                logic.animateTo(index);\n            },\n            goTo: function(index) {\n                logic.goTo(index);\n            },\n            getDots: function() {\n                return logic.dots ? logic.dots : logic.createDots();\n            },\n            getNav: function() {\n                return logic.nav ? logic.nav : logic.createNav();\n            },\n            startAuto: function() {\n                logic.startAuto();\n            },\n            stopAuto: function() {\n                logic.stopAuto();\n            },\n            updateContainerHeight: function(fromSubSlideWithHeight) {\n                logic.updateContainerHeight(fromSubSlideWithHeight);\n            },\n            updateContainerHeightFromParent: function() {\n                logic.updateContainerHeightFromParent();\n            },\n            getCurrentItem: function() {\n                return logic.items[logic.targetIndexWithinBounds];\n            },\n            on: function(eventType, listener) {\n                if (typeof events[eventType] !== 'object') {\n                    events[eventType] = [];\n                }\n                events[eventType].push(listener);\n            },\n            removeListener: function(eventType, listener) {\n                var idx;\n                if (typeof events[eventType] === 'object') {\n                    idx = events[eventType].indexOf(listener);\n                    if (idx > -1) {\n                        events[eventType].splice(idx, 1);\n                    }\n                }\n            },\n            emit: function(eventType, event) {\n                var i, listeners, len, args = [].slice.call(arguments, 1);\n                if (typeof events[eventType] === 'object') {\n                    listeners = events[eventType].slice();\n                    len = listeners.length;\n                    for(i = 0; i < len; i++) {\n                        listeners[i].apply(this, args);\n                    }\n                }\n            }\n        };\n\n        // Initialize.\n        logic.init(container, options);\n\n        /*--------------------------------------------------\n        | Prevent IE image dragging.\n        |-------------------------------------------------*/\n        document.ondragstart = function () { return false; };\n\n        /**\n         *  Experimentally check if window is hidden.\n         *  Used to pause autoplay when window is hidden.\n         */\n        var documentHiddenName = null;\n        function onVisibilityChange(event) {\n            var v = \"visible\", h = \"hidden\";\n            var eventMap = {\n                focus: v,\n                focusin: v,\n                pageshow: v,\n                blur: h,\n                focusout: h,\n                pagehide: h\n            };\n            event = event || window.event;\n            var isHidden = false;\n            if(event.type in eventMap) {\n                isHidden = eventMap[event.type] === 'hidden';\n            }\n            else {\n                isHidden = document[documentHiddenName] ? true : false;\n            }\n            if(isHidden) {\n                logic.addClass(logic.container, 'window-hidden');\n            }\n            else {\n                logic.removeClass(logic.container, 'window-hidden');\n            }\n        }\n        if(\"hidden\" in document) {\n            documentHiddenName = \"hidden\";\n            document.addEventListener(\"visibilitychange\", onVisibilityChange);\n        }\n        else if(\"mozHidden\" in document) {\n            documentHiddenName = \"mozHidden\";\n            document.addEventListener(\"mozvisibilitychange\", onVisibilityChange);\n        }\n        else if(\"webkitHidden\" in document) {\n            documentHiddenName = \"webkitHidden\";\n            document.addEventListener(\"webkitvisibilitychange\", onVisibilityChange);\n        }\n        else if (\"msHidden\" in document) {\n            documentHiddenName = \"msHidden\";\n            document.addEventListener(\"msvisibilitychange\", onVisibilityChange);\n        }\n        // IE 9 and lower:\n        else if (\"onfocusin\" in document) {\n            document.onfocusin = document.onfocusout = onVisibilityChange;\n        }\n        // All others:\n        else {\n            window.onpageshow = window.onpagehide = window.onfocus = window.onblur = onVisibilityChange;\n        }\n        // set the initial state (but only if browser supports the Page Visibility API)\n        if(documentHiddenName && document[documentHiddenName] !== undefined) {\n            onVisibilityChange({type: document[documentHiddenName] ? \"blur\" : \"focus\"});\n        }\n\n        container.tinSlide = tinSlide;\n\n        return tinSlide;\n    }\n\n    /*--------------------------------------------------\n    | Element.firstElementChild polyfill.\n    |-------------------------------------------------*/\n    ;(function(constructor) {\n        if (constructor &&\n            constructor.prototype &&\n            constructor.prototype.firstElementChild == null) {\n            Object.defineProperty(constructor.prototype, 'firstElementChild', {\n                get: function() {\n                    var nodes = this.childNodes, i = 0;\n                    var node = nodes[i++];\n                    while (node) {\n                        if (node.nodeType === 1) {\n                            return node;\n                        }\n                        node = nodes[i++];\n                    }\n                    return null;\n                }\n            });\n        }\n    })(window.Node || window.Element);\n\n    /*--------------------------------------------------\n    | Window.requestAnimationFrame polyfill.\n    |-------------------------------------------------*/\n    window.requestAnimFrame = (function() {\n        return window.requestAnimationFrame    ||\n            window.webkitRequestAnimationFrame ||\n            window.mozRequestAnimationFrame    ||\n            function(callback) {\n                window.setTimeout(callback, 1000 / 60);\n            };\n    })();\n\n    return TinSlide$;\n\n}));\n"],"file":"tin-slide.js"}